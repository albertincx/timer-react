var me=Object.defineProperty;var fe=(e,i,t)=>i in e?me(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var S=(e,i,t)=>(fe(e,typeof i!="symbol"?i+"":i,t),t);import{r as y,j as a,S as w}from"./index-DjCCN7D8.js";var ge=Object.defineProperty,ve=(e,i,t)=>i in e?ge(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,d=(e,i,t)=>(ve(e,typeof i!="symbol"?i+"":i,t),t);const T=class{constructor(e){d(this,"mobileSelect"),d(this,"trigger"),d(this,"wheelList"),d(this,"sliderList"),d(this,"wheelsContain"),d(this,"panel"),d(this,"ensureBtn"),d(this,"cancelBtn"),d(this,"grayLayer"),d(this,"popUp"),d(this,"initPosition"),d(this,"initColWidth"),d(this,"wheelsData"),d(this,"displayJson"),d(this,"curValue"),d(this,"curIndexArr"),d(this,"isCascade"),d(this,"isJsonType"),d(this,"startY"),d(this,"moveEndY"),d(this,"moveY"),d(this,"preMoveY"),d(this,"offsetY"),d(this,"offsetSum"),d(this,"oversizeBorder"),d(this,"enableClickStatus"),d(this,"isPC"),d(this,"optionHeight"),d(this,"curDistance"),d(this,"cascadeJsonData"),d(this,"eventHandleMap"),d(this,"initDeepCount"),d(this,"config"),!T.checkRequiredConfig(e)||(this.config=Object.assign({},T.defaultConfig,e),this.wheelsData=e.wheels,this.isJsonType=!1,this.cascadeJsonData=[],this.displayJson=[],this.curValue=[],this.curIndexArr=[],this.isCascade=!1,this.startY,this.moveEndY,this.moveY,this.preMoveY,this.offsetY=0,this.offsetSum=0,this.oversizeBorder,this.curDistance=[],this.enableClickStatus=!1,this.isPC=!0,this.optionHeight=0,this.initPosition=e.position||[],this.initColWidth=e.colWidth||[],this.init())}init(){const{config:e}=this;if(this.isJsonType=T.checkDataType(this.wheelsData),this.renderComponent(this.wheelsData),!!this.checkTriggerAvailable()){if(this.wheelList=this.mobileSelect.getElementsByClassName("ms-wheel"),this.sliderList=this.mobileSelect.getElementsByClassName("ms-select-container"),this.panel=this.mobileSelect.querySelector(".ms-panel"),this.wheelsContain=this.mobileSelect.querySelector(".ms-wheels"),this.ensureBtn=this.mobileSelect.querySelector(".ms-ensure"),this.cancelBtn=this.mobileSelect.querySelector(".ms-cancel"),this.grayLayer=this.mobileSelect.querySelector(".ms-gray-layer"),this.popUp=this.mobileSelect.querySelector(".ms-content"),this.optionHeight=this.mobileSelect.querySelector("li").offsetHeight,e.initValue&&e.triggerDisplayValue&&(this.trigger.innerText=e.initValue),this.setStyle(e),this.isPC=T.checkIsPC(),this.isCascade=this.checkCascade(),this.isCascade&&this.initCascade(),e.initValue&&(this.initPosition=this.getPositionByValue()),this.initPosition.length<this.sliderList.length){const i=this.sliderList.length-this.initPosition.length;for(let t=0;t<i;t++)this.initPosition.push(0)}this.isCascade?this.initPosition.forEach((i,t)=>{this.checkRange(t,this.initPosition)}):this.setCurDistance(this.initPosition),this.eventHandleMap={cancelBtn:{event:"click",fn:()=>{var i,t,s,n;this.hide(),(t=(i=this.config).cancel)==null||t.call(i,this.curIndexArr,this.curValue,this),(n=(s=this.config).onCancel)==null||n.call(s,this.curValue,this.curIndexArr,this)}},ensureBtn:{event:"click",fn:()=>{var i,t,s,n;this.hide(),this.optionHeight||(this.optionHeight=this.mobileSelect.querySelector("li").offsetHeight);let r="";for(let o=0;o<this.wheelList.length;o++)o==this.wheelList.length-1?r+=this.getInnerText(o):r+=this.getInnerText(o)+this.config.connector;e.triggerDisplayValue&&(this.trigger.innerText=r),this.curIndexArr=this.getIndexArr(),this.curValue=this.getCurValue(),(t=(i=this.config).callback)==null||t.call(i,this.curIndexArr,this.curValue,this),(n=(s=this.config).onChange)==null||n.call(s,this.curValue,this.curIndexArr,this)}},trigger:{event:"click",fn:()=>{this.show()}},grayLayer:{event:"click",fn:()=>this.hide()},popUp:{event:"click",fn:i=>i.stopPropagation()},panel:{event:["touchstart","touchend","touchmove"],fn:i=>this.touch(i)}},this.isPC&&(this.eventHandleMap.panel.event=["mousedown","mousemove","mouseup"]),this.registerEvents("add"),this.fixRowStyle(),e.autoFocus&&this.show()}}static checkIsPC(){return!navigator.userAgent.toLowerCase().match(/ipad|iphone os|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/)}static checkDataType(e){var i,t;return typeof((t=(i=e[0])==null?void 0:i.data)==null?void 0:t[0])=="object"}static checkRequiredConfig(e){const i=T.REQUIRED_PARAMS;if(!e){const t=i.map(s=>`'${s}'`);return T.log("error",`missing required param ${t.join(" and ")}.`),!1}for(let t=0;t<i.length;t++){const s=i[t];if(!e[s])return T.log("error",`missing required param '${s}'.`),!1}return!0}static log(e,i){var t;(t=console[e])==null||t.call(console,`[mobile-select]: ${i}`)}checkTriggerAvailable(){const{config:e}=this;return this.trigger=e.trigger instanceof HTMLElement?e.trigger:document.querySelector(e.trigger),this.trigger?!0:(T.log("error","trigger HTMLElement does not found on your document."),!1)}getPositionByValue(){var e;const{keyMap:i,connector:t,initValue:s}=this.config,n=(s==null?void 0:s.split(t))||[];if(this.isJsonType){let r=(e=this.wheelsData[0])==null?void 0:e.data;return n.reduce((o,l)=>{var c;const h=r==null?void 0:r.findIndex(u=>u[i.value]==l);return o.push(h<0?0:h),r=(c=r[h])==null?void 0:c[i.childs],o},[])}return n.reduce((r,o,l)=>{var c,h;const u=(h=(c=this.wheelsData[l])==null?void 0:c.data)==null?void 0:h.findIndex(p=>p==o);return r.push(u<0?0:u),r},[])}setTitle(e){this.mobileSelect.querySelector(".ms-title").innerHTML=e}setStyle(e){if(e.ensureBtnColor&&(this.ensureBtn.style.color=e.ensureBtnColor),e.cancelBtnColor&&(this.cancelBtn.style.color=e.cancelBtnColor),e.titleColor){const i=this.mobileSelect.querySelector(".ms-title");i.style.color=e.titleColor}if(e.textColor&&(this.panel=this.mobileSelect.querySelector(".ms-panel"),this.panel.style.color=e.textColor),e.titleBgColor){const i=this.mobileSelect.querySelector(".ms-btn-bar");i.style.backgroundColor=e.titleBgColor}if(e.bgColor){this.panel=this.mobileSelect.querySelector(".ms-panel");const i=this.mobileSelect.querySelector(".ms-shadow-mask");this.panel.style.backgroundColor=e.bgColor,i.style.background="linear-gradient(to bottom, "+e.bgColor+", rgba(255, 255, 255, 0), "+e.bgColor+")"}if(typeof e.maskOpacity=="number"){const i=this.mobileSelect.querySelector(".ms-gray-layer");i.style.background="rgba(0, 0, 0, "+e.maskOpacity+")"}}show(){var e,i,t;this.mobileSelect.classList.add("ms-show"),(e=document.querySelector("body"))==null||e.classList.add("ms-show"),typeof this.config.onShow=="function"&&((t=(i=this.config).onShow)==null||t.call(i,this.curValue,this.curIndexArr,this))}hide(){var e,i,t;this.mobileSelect.classList.remove("ms-show"),(e=document.querySelector("body"))==null||e.classList.remove("ms-show"),typeof this.config.onHide=="function"&&((t=(i=this.config).onHide)==null||t.call(i,this.curValue,this.curIndexArr,this))}registerEvents(e){for(const[i,t]of Object.entries(this.eventHandleMap))typeof t.event=="string"?this[i][`${e}EventListener`](t.event,t.fn,{passive:!1}):t.event.forEach(s=>{this[i][`${e}EventListener`](s,t.fn,{passive:!1})})}destroy(){var e,i;this.registerEvents("remove"),(i=(e=this.mobileSelect)==null?void 0:e.parentNode)==null||i.removeChild(this.mobileSelect)}getOptionsHtmlStr(e){const{keyMap:i}=this.config;let t="";if(this.isJsonType)for(let s=0;s<e.length;s++){const n=e[s][i.id],r=e[s][i.value];t+=`<li data-id="${n}">${r}</li>`}else for(let s=0;s<e.length;s++)t+="<li>"+e[s]+"</li>";return t}renderComponent(e){this.mobileSelect=document.createElement("div"),this.mobileSelect.className="ms-mobile-select",this.mobileSelect.innerHTML=`<div class="ms-gray-layer"></div>
        <div class="ms-content">
          <div class="ms-btn-bar">
            <div class="ms-fix-width">
              <div class="ms-cancel">${this.config.cancelBtnText}</div>  
              <div class="ms-title">${this.config.title||""}</div>
              <div class="ms-ensure">${this.config.ensureBtnText}</div>
            </div>
          </div>
          <div class="ms-panel">
            <div class="ms-fix-width">
            <div class="ms-wheels"></div>
            <div class="ms-select-line"></div>
            <div class="ms-shadow-mask"></div>
          </div>
        </div>`,document.body.appendChild(this.mobileSelect);let i="";for(let t=0;t<e.length;t++)i+=`<div class="ms-wheel" data-index="${t}"><ul class="ms-select-container">`,i+=this.getOptionsHtmlStr(e[t].data),i+="</ul></div>";this.mobileSelect.querySelector(".ms-wheels").innerHTML=i}reRenderWheels(){const e=this.wheelList.length-this.displayJson.length;if(e>0)for(let i=0;i<e;i++)this.wheelsContain.removeChild(this.wheelList[this.wheelList.length-1]);for(let i=0;i<this.displayJson.length;i++)if(this.wheelList[i])this.sliderList[i].innerHTML=this.getOptionsHtmlStr(this.displayJson[i]);else{const t=document.createElement("div");t.className="ms-wheel",t.innerHTML=`<ul class="ms-select-container">${this.getOptionsHtmlStr(this.displayJson[i])}</ul>`,t.setAttribute("data-index",i.toString()),this.wheelsContain.appendChild(t)}}checkCascade(){var e;const{keyMap:i}=this.config;if(this.isJsonType){const t=this.wheelsData[0].data;for(let s=0;s<t.length;s++)if(i.childs in t[s]&&((e=t[s][i.childs])==null?void 0:e.length)>0)return this.cascadeJsonData=this.wheelsData[0].data,!0}return!1}initCascade(){this.displayJson.push(this.cascadeJsonData),this.initPosition.length>0?(this.initDeepCount=0,this.initCheckArrDeep(this.cascadeJsonData[this.initPosition[0]])):this.checkArrDeep(this.cascadeJsonData[0]),this.reRenderWheels()}initCheckArrDeep(e){if(e){const{keyMap:i}=this.config;if(i.childs in e&&e[i.childs].length>0){this.displayJson.push(e[i.childs]),this.initDeepCount++;const t=e[i.childs][this.initPosition[this.initDeepCount]];t?this.initCheckArrDeep(t):this.checkArrDeep(e[i.childs][0])}}}checkArrDeep(e){if(!e)return;const{keyMap:i}=this.config;i.childs in e&&e[i.childs].length>0&&(this.displayJson.push(e[i.childs]),this.checkArrDeep(e[i.childs][0]))}checkRange(e,i){var t;const s=this.displayJson.length-1-e,{keyMap:n}=this.config;for(let o=0;o<s;o++)this.displayJson.pop();let r;for(let o=0;o<=e;o++)r=o==0?this.cascadeJsonData[i[0]]:(t=r==null?void 0:r[n.childs])==null?void 0:t[i[o]];this.checkArrDeep(r),this.reRenderWheels(),this.fixRowStyle(),this.setCurDistance(this.resetPosition(e,i))}resetPosition(e,i){const t=[...i];let s;if(this.sliderList.length>i.length){s=this.sliderList.length-i.length;for(let n=0;n<s;n++)t.push(0)}else if(this.sliderList.length<i.length){s=i.length-this.sliderList.length;for(let n=0;n<s;n++)t.pop()}for(let n=e+1;n<t.length;n++)t[n]=0;return t}updateWheels(e){if(this.isCascade){if(this.cascadeJsonData=e,this.displayJson=[],this.initCascade(),this.initPosition.length<this.sliderList.length){const i=this.sliderList.length-this.initPosition.length;for(let t=0;t<i;t++)this.initPosition.push(0)}this.setCurDistance(this.initPosition),this.fixRowStyle()}}updateWheel(e,i){if(this.isCascade){T.log("error","'updateWheel()' not support cascade json data, please use 'updateWheels()' instead to update the whole data source");return}let t="";t+=this.getOptionsHtmlStr(i),this.wheelsData[e]=this.isJsonType?{data:i}:i,this.sliderList[e].innerHTML=t}fixRowStyle(){if(this.initColWidth.length&&this.initColWidth.length===this.wheelList.length){const i=this.initColWidth.reduce((t,s)=>t+s,0);this.initColWidth.forEach((t,s)=>{this.wheelList[s].style.width=(t/i*100).toFixed(2)+"%"});return}const e=(100/this.wheelList.length).toFixed(2);for(let i=0;i<this.wheelList.length;i++)this.wheelList[i].style.width=e+"%"}getIndex(e){return Math.round((2*this.optionHeight-e)/this.optionHeight)}getIndexArr(){const e=[];for(let i=0;i<this.curDistance.length;i++)e.push(this.getIndex(this.curDistance[i]));return e}getCurValue(){const e=[],i=this.getIndexArr(),{keyMap:t}=this.config;if(this.isCascade)for(let s=0;s<this.wheelList.length;s++){const n=this.displayJson[s][i[s]];n&&e.push({[t.id]:n[t.id],[t.value]:n[t.value]})}else if(this.isJsonType)for(let s=0;s<this.curDistance.length;s++)e.push(this.wheelsData[s].data[this.getIndex(this.curDistance[s])]);else for(let s=0;s<this.curDistance.length;s++)e.push(this.getInnerText(s));return e}getValue(){return this.curValue}calcDistance(e){return 2*this.optionHeight-e*this.optionHeight}setCurDistance(e){const i=[];for(let t=0;t<this.sliderList.length;t++)i.push(this.calcDistance(e[t])),this.movePosition(this.sliderList[t],i[t]);this.curDistance=i}fixPosition(e){return-(this.getIndex(e)-2)*this.optionHeight}movePosition(e,i){e.style.transform="translate3d(0,"+i+"px, 0)"}locatePosition(e,i){this.curDistance[e]=this.calcDistance(i),this.movePosition(this.sliderList[e],this.curDistance[e]),this.isCascade&&this.checkRange(e,this.getIndexArr())}updateCurDistance(e,i){this.curDistance[i]=parseInt(e.style.transform.split(",")[1])}getInnerText(e){var i;const t=this.sliderList[e].getElementsByTagName("li").length;let s=this.getIndex(this.curDistance[e]);return s>=t?s=t-1:s<0&&(s=0),((i=this.sliderList[e].getElementsByTagName("li")[s])==null?void 0:i.innerText)||""}touch(e){var i,t,s,n,r,o,l,c;const h=(e.composedPath&&e.composedPath()).find(g=>{var f;return(f=g.classList)==null?void 0:f.contains("ms-wheel")});if(!h)return;const u=h.firstChild,p=parseInt(h.getAttribute("data-index")||"0");switch(e.type){case"touchstart":case"mousedown":u.style.transition="none 0s ease-out",this.startY=Math.floor(e instanceof TouchEvent?e.touches[0].clientY:e.clientY),this.preMoveY=this.startY,e.type==="mousedown"&&(this.enableClickStatus=!0);break;case"touchmove":case"mousemove":if(e.preventDefault(),e.type==="mousemove"&&!this.enableClickStatus)break;this.moveY=Math.floor(e instanceof TouchEvent?e.touches[0].clientY:e.clientY),this.offsetY=(this.moveY-this.preMoveY)*this.config.scrollSpeed,this.updateCurDistance(u,p),this.curDistance[p]=this.curDistance[p]+this.offsetY,this.movePosition(u,this.curDistance[p]),this.preMoveY=this.moveY;break;case"touchend":case"mouseup":if(u.style.transition="transform 0.18s ease-out",this.moveEndY=Math.floor(e instanceof TouchEvent?e.changedTouches[0].clientY:e.clientY),this.offsetSum=this.moveEndY-this.startY,this.oversizeBorder=-(u.getElementsByTagName("li").length-3)*this.optionHeight,this.offsetSum==0){const g=Math.floor((window.innerHeight-this.moveEndY)/40);if(g!=2){const f=g-2,v=this.curDistance[p]+f*this.optionHeight;v<=2*this.optionHeight&&v>=this.oversizeBorder&&(this.curDistance[p]=v,this.movePosition(u,this.curDistance[p]),(t=(i=this.config).transitionEnd)==null||t.call(i,this.getIndexArr(),this.getCurValue(),this),(n=(s=this.config).onTransitionEnd)==null||n.call(s,this.getCurValue(),this.getIndexArr(),this))}}else this.updateCurDistance(u,p),this.curDistance[p]=this.fixPosition(this.curDistance[p]),this.curDistance[p]>2*this.optionHeight?this.curDistance[p]=2*this.optionHeight:this.curDistance[p]<this.oversizeBorder&&(this.curDistance[p]=this.oversizeBorder),this.movePosition(u,this.curDistance[p]),(o=(r=this.config).transitionEnd)==null||o.call(r,this.getIndexArr(),this.getCurValue(),this),(c=(l=this.config).onTransitionEnd)==null||c.call(l,this.getCurValue(),this.getIndexArr(),this);e.type==="mouseup"&&(this.enableClickStatus=!1),this.isCascade&&this.checkRange(p,this.getIndexArr());break}}};let j=T;d(j,"defaultConfig",{keyMap:{id:"id",value:"value",childs:"childs"},position:[],colWidth:[],title:"",connector:" ",ensureBtnText:"确认",cancelBtnText:"取消",triggerDisplayValue:!0,scrollSpeed:1}),d(j,"REQUIRED_PARAMS",["trigger","wheels"]);function ye(e){const i=y.useRef(null);let t=y.useRef(null);return y.useEffect(()=>(t.current||(t.current=new j({...e.config,trigger:i.current,triggerDisplayValue:!e.children})),()=>{t==null||t.current.destroy(),t.current=null}),[]),a.jsx("div",{children:a.jsx("div",{className:"ms-default-trigger",ref:i,children:e.children||e.placeholder||"Please select an option..!"})})}const B="timerHistory",N="subs",K="app_settings",$="app_scroll",V="POPUP_DISCUSS",Y="POPUP_SETTINGS",J="POPUP_DEMO",Se=/([0-9]+):([0-9]+):([0-9]+)[,.]([0-9]+)/g,Te=/([0-9]+):([0-9]+):([0-9]+)[,.]([0-9]+)/,X=/\n[0-9]{1,6}\n/,E=/\n[0-9]{1,6}?\s\n/,we=/\r\n/,be=new RegExp("<(font|i)[^><]*>|<.(font|i)[^><]*>","g"),M="[^^]";function Ce(e){return e||X}function F(e){var n;const i=e.match(Se);if(!i)return 0;const t=[];if(i.length){const r=new Date,o=(n=i[0].match(Te))==null?void 0:n.map(Number);o&&r.setHours(Number(o[1]),o[2],o[3],o[4]),t.push(r)}const s=new Date;return s.setHours(0,0,0,0),t.push(s),t[0].getTime()-t[1].getTime()}let L=0;const C=[X,E,we];function U(e){let i=0;for(let t=0;t<C.length;t+=1)if(e.split(C[t]).length>1){i=t;break}return i}function De(e,i){const t=F(e);let s="";for(let n=L;n<i.length;n+=1){const r=F(i[n]);if(t-r<500){L=n,s=i[n];break}}return s}function W(e){let i=e.bstr.split(`
`);return i=i.filter(t=>t.match("Dialogue: ")).map((t,s)=>{const n=t.split("Dialogue: ")[1].split(",");let[r,o,l,c,h,u,p,g,f,v]=n;return o.match(/^0:/)&&(o=`0${o}`),l.match(/^0:/)&&(l=`0${l}`),`
${s}
${o} --> ${l}
${v}
`}),i.join("")}const q=e=>e.replace(be,"");function xe(e){L=0;let[i,t]=e;i.filename.match(/\.ass$/)&&(i.bstr=W(i)),t.filename.match(/\.ass$/)&&(t.bstr=W(t));const s=U(i.bstr),n=U(t.bstr);i.bstr=q(i.bstr),t.bstr=q(t.bstr);let r=i.bstr.split(C[s]);C[s]&&(i.sep=`${C[s]}`);let o=t.bstr.split(C[n]);r.length===1&&(r=i.bstr.split(E)),o.length===1&&(r=t.bstr.split(E));const l=[];for(let h=0;h<r.length;h+=1)l.push(De(r[h],o));const c={bstr:l.join(M),filename:t.filename,sep:M};return[i,c]}function z(e){let{sep:i}=e;return i&&i!==M&&(i=new RegExp(i.replace(/\//g,""))),e.bstr.split(Ce(i))}const b=()=>{let e=w.getJ(N)||[];return e||(e=[]),e},O=()=>w.getJ(K)||{};function Pe(e){return""}function ke(e,i){const{voice:t,rate:s=1,volume:n=1,pitch:r=1}=O(),o=new SpeechSynthesisUtterance;o.text=`${e}`.replace(/\n/g,""),o.volume=parseFloat(String(n)),o.rate=parseFloat(String(s)),o.pitch=parseFloat(String(r)),window.speechSynthesis.speak(o)}const Z=e=>{if(!e||!Array.isArray(e)||e.length===0)return{items:[],filenames:[]};const i=[e[0].filename];let t=[];if(e[0]&&(t=[z(e[0])]),e[1]){i.push(e[1].filename);const s=z(e[1]);t.push(s)}return{items:t,filenames:i}},je=(e,i=!1)=>{e.length>2&&(e=e.slice(0,2));let t=[],s="";for(let o=0;o<e.length;o+=1)e[o].bstr.trim()?t.push({bstr:e[o].bstr,filename:e[o].filename}):s="EMPTY";if(t.length){if(i){t=e;const o=b();o&&A(o,!0)}else t.length===2&&(t=xe(t));w.setJ(N,t)}const{items:n,filenames:r}=Z([...t]);return i||A(t),{items:n,showStr:"",error:s,filenames:r}},A=(e,i=!1)=>{let t=w.getJ(B)||[],s=[],n=!1,r=!1;t.length?e.length>1&&(s=t.filter(o=>!Array.isArray(o)||o.length===0?!1:o[0].filename!==e[0].filename||o[0].filename!==e[1].filename),t.length!==s.length&&(n=!0)):e.length>1&&(s=[e],r=!0),i&&e.length>1&&!r&&(s=s.concat([e])),s.length&&(n||i)&&w.setJ(B,s)};function G(e,i=!1){try{const t=speechSynthesis.getVoices(),s=document.getElementById("voice");if(!s)return;const n=document.createElement("option");if(n.value="",n.innerHTML="",s.appendChild(n),t&&i){const r=document.getElementById("msg");r&&(t.length?r.innerHTML+=` And <strong>has</strong> ${t.length} speech synthesis.`:r.innerHTML+=` But don't have any speech synthesis. We recommend using Google 
 <strong>Chrome / Chrome Mobile</strong> for this <strong>text-to-speech</strong>`)}t.forEach(function(r){const o=document.createElement("option");o.value=r.name,o.innerHTML=r.name,r.name===e&&(o.selected=!0),s.appendChild(o)})}catch{}}function ee(e=""){const i=document.getElementById("msg");i&&("speechSynthesis"in window?i.innerHTML='Your browser <strong onclick="return tryToCopyLines()">supports</strong> speech synthesis.':(i.innerHTML='Sorry your browser <strong>does not support</strong> speech synthesis.<br>Try this in <a href="https://www.google.co.uk/intl/en/chrome/browser/canary.html">Chrome Canary</a>.',i.classList.add("not-supported"))),G(e),window.speechSynthesis.onvoiceschanged=function(){G(e,!0)}}window.tryToCopyLines=()=>{typeof window.availableVoicesTxt>"u"||navigator.clipboard.writeText(window.availableVoicesTxt)};const Ee=({data:e,togglePopup:i,voiceSettingSave:t})=>{const{voice:s,error:n,volume:r,rate:o,pitch:l}=e,[c,h]=y.useState({voice:s,volume:r,rate:o,pitch:l});y.useEffect(()=>{ee(s)},[]);const u=f=>{const{name:v,value:x}=f.target;h(k=>({...k,[v]:x}))},p=f=>{if(!(!s&&!c.voice))return t(c),f.preventDefault(),!1},g=f=>{t({...c,voice:""},!0),i(f,!1)};return console.log(c),a.jsx("div",{children:a.jsx("div",{className:"modal-window",children:a.jsxs("div",{children:[a.jsx("a",{href:"",title:"Close",className:"modal-close",onClick:f=>i(f,!1),children:"Close"}),a.jsx("h4",{children:"Web Speech Synthesis Demo"}),a.jsx("div",{children:a.jsxs("form",{onSubmit:()=>!1,id:"settings-form","data-voice":s,children:[a.jsxs("div",{id:"page-wrapper",children:[a.jsx("p",{id:"msg"}),a.jsxs("div",{className:"option",children:[a.jsx("label",{htmlFor:"voice",children:"Voice"})," ",a.jsx("select",{required:!0,name:"voice",id:"voice",value:c.voice||"",onChange:u})]}),a.jsxs("div",{className:"option",children:[a.jsx("label",{htmlFor:"volume",children:"Volume"}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",name:"volume",id:"volume",value:c.volume,onChange:u})]}),a.jsxs("div",{className:"option",children:[a.jsx("label",{htmlFor:"rate",children:"Rate"}),a.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",name:"rate",id:"rate",value:c.rate,onChange:u})]}),a.jsxs("div",{className:"option",children:[a.jsx("label",{htmlFor:"pitch",children:"Pitch"}),a.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",name:"pitch",id:"pitch",value:c.pitch,onChange:u})]}),n?a.jsx("div",{color:"red",children:n}):null,a.jsxs("div",{className:"btn-wrap",children:[a.jsx("button",{className:"btn btn-primary",onClick:p,children:"Save"}),"  ",a.jsx("button",{className:"btn btn-danger",onClick:g,children:"Clear Settings"})]})]}),a.jsx("div",{children:a.jsx("a",{href:"",title:"Close",className:"modal-close bottom",onClick:f=>i(f,!1),children:"Close"})})]})})]})})})};var te={exports:{}},Me="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Le=Me,Oe=Le;function ie(){}function se(){}se.resetWarningCache=ie;var Ae=function(){function e(s,n,r,o,l,c){if(c!==Oe){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function i(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:i,element:e,elementType:e,instanceOf:i,node:e,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:se,resetWarningCache:ie};return t.PropTypes=t,t};te.exports=Ae();var m=te.exports;function ne(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function Ie(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function oe(e,i,t){return i&&Ie(e.prototype,i),e}function re(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i&&I(e,i)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},P(e)}function I(e,i){return I=Object.setPrototypeOf||function(s,n){return s.__proto__=n,s},I(e,i)}function _e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e,i){return i&&(typeof i=="object"||typeof i=="function")?i:Ne(e)}function ae(e){var i=_e();return function(){var s=P(e),n;if(i){var r=P(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return Re(this,n)}}function He(e){return Be(e)||$e(e)||Ve(e)||Ye()}function Be(e){if(Array.isArray(e))return _(e)}function $e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Ve(e,i){if(e){if(typeof e=="string")return _(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,i)}}function _(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,s=new Array(i);t<i;t++)s[t]=e[t];return s}function Ye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=String(e);if(i===0)return t;var s=t.match(/(.*?)([0-9]+)(.*)/),n=s?s[1]:"",r=s?s[3]:"",o=s?s[2]:t,l=o.length>=i?o:(He(Array(i)).map(function(){return"0"}).join("")+o).slice(i*-1);return"".concat(n).concat(l).concat(r)}var le={daysInHours:!1,zeroPadTime:2};function Je(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=i.now,s=t===void 0?Date.now:t,n=i.precision,r=n===void 0?0:n,o=i.controlled,l=i.offsetTime,c=l===void 0?0:l,h=i.overtime,u;typeof e=="string"?u=new Date(e).getTime():e instanceof Date?u=e.getTime():u=e,o||(u+=c);var p=o?u:u-s(),g=Math.min(20,Math.max(0,r)),f=Math.round(parseFloat(((h?p:Math.max(0,p))/1e3).toFixed(g))*1e3),v=Math.abs(f)/1e3;return{total:f,days:Math.floor(v/(3600*24)),hours:Math.floor(v/3600%24),minutes:Math.floor(v/60%60),seconds:Math.floor(v%60),milliseconds:Number((v%1*1e3).toFixed()),completed:f<=0}}function Fe(e,i){var t=e.days,s=e.hours,n=e.minutes,r=e.seconds,o=Object.assign(Object.assign({},le),i),l=o.daysInHours,c=o.zeroPadTime,h=o.zeroPadDays,u=h===void 0?c:h,p=Math.min(2,c),g=l?D(s+t*24,c):D(s,p);return{days:l?"":D(t,u),hours:g,minutes:D(n,p),seconds:D(r,p)}}var ce=function(e){re(t,e);var i=ae(t);function t(){var s;return ne(this,t),s=i.apply(this,arguments),s.state={count:s.props.count||3},s.startCountdown=function(){s.interval=window.setInterval(function(){var n=s.state.count-1;n===0?(s.stopCountdown(),s.props.onComplete&&s.props.onComplete()):s.setState(function(r){return{count:r.count-1}})},1e3)},s.stopCountdown=function(){clearInterval(s.interval)},s.addTime=function(n){s.stopCountdown(),s.setState(function(r){return{count:r.count+n}},s.startCountdown)},s}return oe(t,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?y.cloneElement(this.props.children,{count:this.state.count}):null}}]),t}(y.Component);ce.propTypes={count:m.number,children:m.element,onComplete:m.func};var R=function(e){re(t,e);var i=ae(t);function t(s){var n;if(ne(this,t),n=i.call(this,s),n.mounted=!1,n.initialTimestamp=n.calcOffsetStartTimestamp(),n.offsetStartTimestamp=n.props.autoStart?0:n.initialTimestamp,n.offsetTime=0,n.legacyMode=!1,n.legacyCountdownRef=y.createRef(),n.tick=function(){var o=n.calcTimeDelta(),l=o.completed&&!n.props.overtime?void 0:n.props.onTick;n.setTimeDeltaState(o,void 0,l)},n.start=function(){if(!n.isStarted()){var o=n.offsetStartTimestamp;n.offsetStartTimestamp=0,n.offsetTime+=o?n.calcOffsetStartTimestamp()-o:0;var l=n.calcTimeDelta();n.setTimeDeltaState(l,"STARTED",n.props.onStart),!n.props.controlled&&(!l.completed||n.props.overtime)&&(n.clearTimer(),n.interval=window.setInterval(n.tick,n.props.intervalDelay))}},n.pause=function(){n.isPaused()||(n.clearTimer(),n.offsetStartTimestamp=n.calcOffsetStartTimestamp(),n.setTimeDeltaState(n.state.timeDelta,"PAUSED",n.props.onPause))},n.stop=function(){n.isStopped()||(n.clearTimer(),n.offsetStartTimestamp=n.calcOffsetStartTimestamp(),n.offsetTime=n.offsetStartTimestamp-n.initialTimestamp,n.setTimeDeltaState(n.calcTimeDelta(),"STOPPED",n.props.onStop))},n.isStarted=function(){return n.isStatus("STARTED")},n.isPaused=function(){return n.isStatus("PAUSED")},n.isStopped=function(){return n.isStatus("STOPPED")},n.isCompleted=function(){return n.isStatus("COMPLETED")},s.date){var r=n.calcTimeDelta();n.state={timeDelta:r,status:r.completed?"COMPLETED":"STOPPED"}}else n.legacyMode=!0;return n}return oe(t,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.onMount&&this.props.onMount(this.calcTimeDelta()),this.props.autoStart&&this.start())}},{key:"componentDidUpdate",value:function(n){this.legacyMode||this.props.date!==n.date&&(this.initialTimestamp=this.calcOffsetStartTimestamp(),this.offsetStartTimestamp=this.initialTimestamp,this.offsetTime=0,this.setTimeDeltaState(this.calcTimeDelta()))}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearTimer())}},{key:"calcTimeDelta",value:function(){var n=this.props,r=n.date,o=n.now,l=n.precision,c=n.controlled,h=n.overtime;return Je(r,{now:o,precision:l,controlled:c,offsetTime:this.offsetTime,overtime:h})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(n){this.legacyCountdownRef.current.addTime(n)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(n){return this.state.status===n}},{key:"setTimeDeltaState",value:function(n,r,o){var l=this;if(this.mounted){var c=n.completed&&!this.state.timeDelta.completed,h=n.completed&&r==="STARTED";c&&!this.props.overtime&&this.clearTimer();var u=function(){o&&o(l.state.timeDelta),l.props.onComplete&&(c||h)&&l.props.onComplete(n,h)};return this.setState(function(p){var g=r||p.status;return n.completed&&!l.props.overtime?g="COMPLETED":!r&&g==="COMPLETED"&&(g="STOPPED"),{timeDelta:n,status:g}},u)}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var n=this.props,r=n.daysInHours,o=n.zeroPadTime,l=n.zeroPadDays,c=this.state.timeDelta;return Object.assign(Object.assign({},c),{api:this.getApi(),props:this.props,formatted:Fe(c,{daysInHours:r,zeroPadTime:o,zeroPadDays:l})})}},{key:"render",value:function(){if(this.legacyMode){var n=this.props,r=n.count,o=n.children,l=n.onComplete;return y.createElement(ce,{ref:this.legacyCountdownRef,count:r,onComplete:l},o)}var c=this.props,h=c.className,u=c.overtime,p=c.children,g=c.renderer,f=this.getRenderProps();if(g)return g(f);if(p&&this.state.timeDelta.completed&&!u)return y.cloneElement(p,{countdown:f});var v=f.formatted,x=v.days,k=v.hours,de=v.minutes,pe=v.seconds;return y.createElement("span",{className:h},f.total<0?"-":"",x,x?":":"",k,":",de,":",pe)}}]),t}(y.Component);R.defaultProps=Object.assign(Object.assign({},le),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0});R.propTypes={date:m.oneOfType([m.instanceOf(Date),m.string,m.number]),daysInHours:m.bool,zeroPadTime:m.number,zeroPadDays:m.number,controlled:m.bool,intervalDelay:m.number,precision:m.number,autoStart:m.bool,overtime:m.bool,className:m.string,children:m.element,renderer:m.func,now:m.func,onMount:m.func,onStart:m.func,onPause:m.func,onStop:m.func,onTick:m.func,onComplete:m.func};const Ue={SAME:"Files same, please upload different filename",EMPTY:"One of uploaded file has empty content, please upload another file"};Notification.requestPermission().then(function(e){});let H=[{id:"1",value:"兰博基尼"},{id:"2",value:"劳斯莱斯",childs:[{id:"1",value:"曜影"},{id:"2",value:"幻影",childs:[{id:"1",value:"标准版"},{id:"2",value:"加长版"},{id:"3",value:"巅峰之旅"},{id:"4",value:"流光熠世"},{id:"5",value:"都会典藏版"}]},{id:"3",value:"古思特",childs:[{id:"1",value:"加长版"},{id:"2",value:"永恒之爱"},{id:"3",value:"英骥"},{id:"4",value:"阿尔卑斯典藏版"}]},{id:"4",value:"魅影",childs:[{id:"1",value:"标准版"},{id:"2",value:"Black Badge"}]}]},{id:"3",value:"宾利",childs:[{id:"1",value:"慕尚",childs:[{id:"1",value:"标准版"},{id:"2",value:"极致版"}]},{id:"2",value:"欧陆",childs:[{id:"1",value:"尊贵版"},{id:"2",value:"敞篷标准版"},{id:"3",value:"敞篷尊贵版"}]}]},{id:"4",value:"法拉利",childs:[{id:"1",value:"LaFerrari"},{id:"2",value:"法拉利488"},{id:"3",value:"GTC4Lusso"}]},{id:"5",value:"玛莎拉蒂",childs:[{id:"1",value:"总裁"},{id:"2",value:"玛莎拉蒂GT"},{id:"3",value:"Levante"}]}];H=[];const he=[];Array.from({length:59}).map((e,i)=>{he.push({id:`${i+1}`,value:`${i+1}`})});Array.from({length:23}).map((e,i)=>{H.push({id:`${i+1}`,value:`${i+1}`,childs:[...he]})});const We=()=>(new Notification("Hi there!"),a.jsx("span",{children:"You are good to go!"}));let ue=0,Q=location.href.split("timer=");Q[1]&&(ue=+Q[1]);const qe=()=>{y.useState("10:00");const[e,i]=y.useState(ue),t={ensureBtnText:"save",cancelBtnText:"cancel",wheels:[{data:H}],onChange:(r,o,l)=>{}},s=r=>{const o=r.target.dataset.time;location.href="#timer="+o,o&&i(+o)},n=()=>{i(0)};return a.jsxs("div",{className:"App",children:[a.jsx(ye,{config:t}),a.jsxs("div",{className:"grid times",children:[a.jsx("div",{onClick:s,"data-time":"3",children:"3 sec"}),a.jsx("div",{onClick:s,"data-time":"10",children:"10 sec"}),a.jsx("div",{onClick:s,"data-time":"20",children:"20 sec"})]}),e&&a.jsx(R,{date:Date.now()+e*1e3,onComplete:n,children:a.jsx(We,{})})]})};class Qe extends y.Component{constructor(t){super(t);S(this,"handleUpload",(t,s=!1)=>{let{filenames:n}=this.state;if(n.length===1&&t[0].filename===n[0]){this.setState({error:"SAME"});return}t.length===1&&n.length===1&&b()[0]&&(t=t.concat([...b()]));const r=je(t,s);s&&(r.modal=""),r.modal="",r.showPopupFiles=!1,this.setState(()=>({...r}))});S(this,"clear",()=>{const t=b();A(t,!0),w.rm(N),this.setState({filenames:[],items:[],showPopupFiles:!1,showStr:"",error:""})});S(this,"show",({target:t},s=!1)=>{if(t.tagName==="BUTTON")return;const n=t.dataset.ind,{items:r,isShown:o,ind:l}=this.state;let c=o;const[,h]=r;if(h[n]){c=n!==l||!c;let u="";c&&(u=h[n]),this.setState({showStr:u,ind:n,isShown:c},()=>{s&&this.tryToSpeak(u)()})}});S(this,"handleScroll",()=>{w.set($,window.scrollY)});S(this,"getStr",t=>{const s=t.split(/>\s[0-9]+:[0-9]+:[0-9]+[.,][0-9]+/);return s[1]&&(t=s[1]),t});S(this,"renderRow",(t,s)=>(t=this.getStr(t),t?a.jsx("div",{onMouseDown:this.show,"data-ind":s,children:a.jsxs("div",{"data-ind":s,children:[t,a.jsx("span",{className:"tooltiptext",children:t?a.jsx("button",{"data-ind":this.state.showStr&&s,onClick:this.tryToSpeak(t),className:"icon speech-voice"}):null})]})},`${t}${s}`):null));S(this,"togglePopup",(t,s=!0)=>{t.preventDefault(),this.setState({showPopupFiles:s,modal:""})});S(this,"toggleDemo",t=>{if(this.state.modal===J)return this.togglePopup(t,!1);this.toggleModal(t,J)});S(this,"toggleModal",(t,s=V)=>{t.preventDefault(),this.setState({modal:s})});S(this,"closeModal",()=>{this.setState({modal:""})});S(this,"tryToSpeak",t=>s=>{const{voice:n,showStr:r,ind:o}=this.state;let l=!1;if(s&&s.target.dataset.ind&&o!==s.target.dataset.ind)return this.show({target:{tagName:"DIV",dataset:s.target.dataset}},!0);r&&(t=this.getStr(r),l=!0);const c=b(),h=Pe(c[l?1:0]);if(n||h)return ke(t);this.voiceSetting(s)});S(this,"voiceSetting",t=>{t&&t.preventDefault(),this.setState({modal:Y})});S(this,"voiceSettingSave",(t,s=!1)=>{const{voice:n,rate:r,pitch:o,volume:l}=t;if(!s){if(this.state.voice===n||!n&&this.state.voice)return this.closeModal()}const c=O();w.setJ(K,{...c,voice:n,rate:r,pitch:o,volume:l}),this.setState({modal:"",voice:n,rate:r,pitch:o,volume:l})});const{items:s=[],filenames:n=[]}=Z(b()),{voice:r,rate:o=1,volume:l=1,pitch:c=1}=O();this.state={showStr:"",ind:"",isShown:-1,error:"",filenames:n,items:s,showPopupFiles:!1,modal:"",voice:r,rate:o,volume:l,pitch:c}}componentDidMount(){const t=w.get($,!1);ee(),t&&window.scrollTo(0,t),window.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll)}render(){const{items:t,showStr:s,error:n,filenames:r,showPopupFiles:o,modal:l}=this.state,c=`folder${t.length?"-fill":""}`;return a.jsxs("div",{children:[l===V?a.jsx("div",{className:"modal-window",children:a.jsxs("div",{children:[a.jsx("a",{href:"",title:"Close",className:"modal-close",onClick:h=>this.togglePopup(h,!1),children:"Close"}),a.jsx("div",{children:a.jsx("a",{href:"",title:"Close",className:"modal-close bottom",onClick:h=>this.togglePopup(h,!1),children:"Close"})})]})}):null,s?a.jsx("div",{className:"tooltip1",children:a.jsx("span",{className:"tooltiptext",children:this.getStr(s)})}):null,a.jsx("div",{children:a.jsxs("div",{className:"buttons",children:[t.length===2?a.jsx("button",{className:`icon ${c}-icon`,onClick:this.togglePopup}):null,a.jsx("button",{className:"icon speech-voice-setting",onClick:this.voiceSetting})]})}),a.jsxs("div",{className:"lang-items",children:[t.length===1?a.jsxs("div",{className:"load-step",children:[n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"alert alert-danger",children:Ue[n]}),a.jsx("br",{})]}):null,a.jsxs("div",{children:["1 File ",r[0],a.jsx("span",{className:"green",children:" loaded"})]}),a.jsxs("div",{children:["2 File ",a.jsx("span",{className:"gray",children:"not loaded"})]}),a.jsx("br",{}),a.jsx("div",{children:a.jsx("button",{className:"btn",onClick:this.clear,children:"Delete all"})})]}):null,t.length===2?t[0].map((h,u)=>this.renderRow(h,u)):null]}),l===Y?a.jsx(Ee,{data:this.state,togglePopup:this.togglePopup,voiceSettingSave:this.voiceSettingSave}):null,a.jsx(qe,{})]})}}export{Qe as default};

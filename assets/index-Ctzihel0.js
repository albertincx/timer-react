var ie=Object.defineProperty;var oe=(t,s,e)=>s in t?ie(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var g=(t,s,e)=>(oe(t,typeof s!="symbol"?s+"":s,e),e);import{x as b,r as p,S as x,j as i}from"./index-DWZGkufB.js";var H=typeof window>"u"?p.useEffect:p.useLayoutEffect,re=({isPlaying:t,duration:s,startAt:e=0,updateInterval:n=0,onComplete:l,onUpdate:o})=>{let[r,h]=p.useState(e),c=p.useRef(0),a=p.useRef(e),d=p.useRef(e*-1e3),m=p.useRef(null),u=p.useRef(null),f=p.useRef(null),y=w=>{let v=w/1e3;if(u.current===null){u.current=v,m.current=requestAnimationFrame(y);return}let S=v-u.current,C=c.current+S;u.current=v,c.current=C;let R=a.current+(n===0?C:(C/n|0)*n),I=a.current+C,_=typeof s=="number"&&I>=s;h(_?s:R),_||(m.current=requestAnimationFrame(y))},T=()=>{m.current&&cancelAnimationFrame(m.current),f.current&&clearTimeout(f.current),u.current=null},j=p.useCallback(w=>{T(),c.current=0;let v=typeof w=="number"?w:e;a.current=v,h(v),t&&(m.current=requestAnimationFrame(y))},[t,e]);return H(()=>{if(o==null||o(r),s&&r>=s){d.current+=s*1e3;let{shouldRepeat:w=!1,delay:v=0,newStartAt:S}=(l==null?void 0:l(d.current/1e3))||{};w&&(f.current=setTimeout(()=>j(S),v*1e3))}},[r,s]),H(()=>(t&&(m.current=requestAnimationFrame(y)),T),[t,s,n]),{elapsedTime:r,reset:j}},le=(t,s,e)=>{let n=t/2,l=s/2,o=n-l,r=2*o,h=e==="clockwise"?"1,0":"0,1",c=2*Math.PI*o;return{path:`m ${n},${l} a ${o},${o} 0 ${h} 0,${r} a ${o},${o} 0 ${h} 0,-${r}`,pathLength:c}},O=(t,s)=>t===0||t===s?0:typeof s=="number"?t-s:0,ae=t=>({position:"relative",width:t,height:t}),ce={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},X=(t,s,e,n,l)=>{if(n===0)return s;let o=(l?n-t:t)/n;return s+e*o},B=t=>{var s,e;return(e=(s=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,l,o,r)=>`#${l}${l}${o}${o}${r}${r}`).substring(1).match(/.{2}/g))==null?void 0:s.map(n=>parseInt(n,16)))!=null?e:[]},de=(t,s)=>{var e;let{colors:n,colorsTime:l,isSmoothColorTransition:o=!0}=t;if(typeof n=="string")return n;let r=(e=l==null?void 0:l.findIndex((u,f)=>u>=s&&s>=l[f+1]))!=null?e:-1;if(!l||r===-1)return n[0];if(!o)return n[r];let h=l[r]-s,c=l[r]-l[r+1],a=B(n[r]),d=B(n[r+1]),m=!!t.isGrowing;return`rgb(${a.map((u,f)=>X(h,u,d[f]-u,c,m)|0).join(",")})`},he=t=>{let{duration:s,initialRemainingTime:e,updateInterval:n,size:l=180,strokeWidth:o=12,trailStrokeWidth:r,isPlaying:h=!1,isGrowing:c=!1,rotation:a="clockwise",onComplete:d,onUpdate:m}=t,u=p.useRef(),f=Math.max(o,r??0),{path:y,pathLength:T}=le(l,f,a),{elapsedTime:j}=re({isPlaying:h,duration:s,startAt:O(s,e),updateInterval:n,onUpdate:typeof m=="function"?v=>{let S=Math.ceil(s-v);S!==u.current&&(u.current=S,m(S))}:void 0,onComplete:typeof d=="function"?v=>{var S;let{shouldRepeat:C,delay:R,newInitialRemainingTime:I}=(S=d(v))!=null?S:{};if(C)return{shouldRepeat:C,delay:R,newStartAt:O(s,I)}}:void 0}),w=s-j;return{elapsedTime:j,path:y,pathLength:T,remainingTime:Math.ceil(w),rotation:a,size:l,stroke:de(t,w),strokeDashoffset:X(j,0,T,s,c),strokeWidth:o}},N=t=>{let{children:s,strokeLinecap:e,trailColor:n,trailStrokeWidth:l}=t,{path:o,pathLength:r,stroke:h,strokeDashoffset:c,remainingTime:a,elapsedTime:d,size:m,strokeWidth:u}=he(t);return b.createElement("div",{style:ae(m)},b.createElement("svg",{viewBox:`0 0 ${m} ${m}`,width:m,height:m,xmlns:"http://www.w3.org/2000/svg"},b.createElement("path",{d:o,fill:"none",stroke:n??"#d9d9d9",strokeWidth:l??u}),b.createElement("path",{d:o,fill:"none",stroke:h,strokeLinecap:e??"round",strokeWidth:u,strokeDasharray:r,strokeDashoffset:c})),typeof s=="function"&&b.createElement("div",{style:ce},s({remainingTime:a,elapsedTime:d,color:h})))};N.displayName="CountdownCircleTimer";const V="timerHistory",W="subs",Z="app_settings",G="app_scroll",q="POPUP_DISCUSS",z="POPUP_SETTINGS",J="POPUP_DEMO",P=()=>{let t=x.getJ(W)||[];return t||(t=[]),t},A=()=>x.getJ(Z)||{};function me(t){return""}function ue(t,s){const{voice:e,rate:n=1,volume:l=1,pitch:o=1}=A(),r=new SpeechSynthesisUtterance;r.text=`${t}`.replace(/\n/g,""),r.volume=parseFloat(String(l)),r.rate=parseFloat(String(n)),r.pitch=parseFloat(String(o)),window.speechSynthesis.speak(r)}const ee=t=>{if(!t||!Array.isArray(t)||t.length===0)return{items:[],filenames:[]};const s=[t[0].filename];return{items:[],filenames:s}},pe=(t,s=!1)=>{t.length>2&&(t=t.slice(0,2));let e=[],n="";for(let r=0;r<t.length;r+=1)t[r].bstr.trim()?e.push({bstr:t[r].bstr,filename:t[r].filename}):n="EMPTY";if(e.length){if(s){e=t;const r=P();r&&F(r,!0)}x.setJ(W,e)}const{items:l,filenames:o}=ee([...e]);return s||F(e),{items:l,showStr:"",error:n,filenames:o}},F=(t,s=!1)=>{let e=x.getJ(V)||[],n=[],l=!1,o=!1;e.length?t.length>1&&(n=e.filter(r=>!Array.isArray(r)||r.length===0?!1:r[0].filename!==t[0].filename||r[0].filename!==t[1].filename),e.length!==n.length&&(l=!0)):t.length>1&&(n=[t],o=!0),s&&t.length>1&&!o&&(n=n.concat([t])),n.length&&(l||s)&&x.setJ(V,n)};function Y(t,s=!1){try{const e=speechSynthesis.getVoices(),n=document.getElementById("voice");if(!n)return;const l=document.createElement("option");if(l.value="",l.innerHTML="",n.appendChild(l),e&&s){const o=document.getElementById("msg");o&&(e.length?o.innerHTML+=` And <strong>has</strong> ${e.length} speech synthesis.`:o.innerHTML+=` But don't have any speech synthesis. We recommend using Google 
 <strong>Chrome / Chrome Mobile</strong> for this <strong>text-to-speech</strong>`)}e.forEach(function(o){const r=document.createElement("option");r.value=o.name,r.innerHTML=o.name,o.name===t&&(r.selected=!0),n.appendChild(r)})}catch{}}function te(t=""){const s=document.getElementById("msg");s&&("speechSynthesis"in window?s.innerHTML='Your browser <strong onclick="return tryToCopyLines()">supports</strong> speech synthesis.':(s.innerHTML='Sorry your browser <strong>does not support</strong> speech synthesis.<br>Try this in <a href="https://www.google.co.uk/intl/en/chrome/browser/canary.html">Chrome Canary</a>.',s.classList.add("not-supported"))),Y(t),window.speechSynthesis.onvoiceschanged=function(){Y(t,!0)}}window.tryToCopyLines=()=>{typeof window.availableVoicesTxt>"u"||navigator.clipboard.writeText(window.availableVoicesTxt)};const fe=({data:t,togglePopup:s,voiceSettingSave:e})=>{const{voice:n,error:l,volume:o,rate:r,pitch:h}=t,[c,a]=p.useState({voice:n,volume:o,rate:r,pitch:h});p.useEffect(()=>{te(n)},[]);const d=f=>{const{name:y,value:T}=f.target;a(j=>({...j,[y]:T}))},m=f=>{if(!(!n&&!c.voice))return e(c),f.preventDefault(),!1},u=f=>{e({...c,voice:""},!0),s(f,!1)};return console.log(c),i.jsx("div",{children:i.jsx("div",{className:"modal-window",children:i.jsxs("div",{children:[i.jsx("a",{href:"",title:"Close",className:"modal-close",onClick:f=>s(f,!1),children:"Close"}),i.jsx("h4",{children:"Web Speech Synthesis Demo"}),i.jsx("div",{children:i.jsxs("form",{onSubmit:()=>!1,id:"settings-form","data-voice":n,children:[i.jsxs("div",{id:"page-wrapper",children:[i.jsx("p",{id:"msg"}),i.jsxs("div",{className:"option",children:[i.jsx("label",{htmlFor:"voice",children:"Voice"})," ",i.jsx("select",{required:!0,name:"voice",id:"voice",value:c.voice||"",onChange:d})]}),i.jsxs("div",{className:"option",children:[i.jsx("label",{htmlFor:"volume",children:"Volume"}),i.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",name:"volume",id:"volume",value:c.volume,onChange:d})]}),i.jsxs("div",{className:"option",children:[i.jsx("label",{htmlFor:"rate",children:"Rate"}),i.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",name:"rate",id:"rate",value:c.rate,onChange:d})]}),i.jsxs("div",{className:"option",children:[i.jsx("label",{htmlFor:"pitch",children:"Pitch"}),i.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",name:"pitch",id:"pitch",value:c.pitch,onChange:d})]}),l?i.jsx("div",{color:"red",children:l}):null,i.jsxs("div",{className:"btn-wrap",children:[i.jsx("button",{className:"btn btn-primary",onClick:m,children:"Save"}),"  ",i.jsx("button",{className:"btn btn-danger",onClick:u,children:"Clear Settings"})]})]}),i.jsx("div",{children:i.jsx("a",{href:"",title:"Close",className:"modal-close bottom",onClick:f=>s(f,!1),children:"Close"})})]})})]})})})},ge="/assets/alarm-clock-short-Cm5_pO2Q.mp3";Notification.requestPermission().then(function(t){});let ne=[];const se=[],ve=new Date().getHours();new Date().getMinutes();const D=60,$=3600,k=86400,E={isPlaying:!0,size:120,strokeWidth:6},M=(t,s)=>i.jsxs("div",{className:"time-wrapper",children:[i.jsx("div",{className:"time",children:s}),i.jsx("div",{children:t})]}),Se=t=>D-t|0,we=t=>t%$/D|0,xe=t=>t%k/$|0,K=t=>t/k|0,ye=({t})=>{const s=Date.now()/1e3,n=s+t-s,o=Math.ceil(n/k)*k,r=80;E.size=r;const h=!!K(o-n),c=t/60/60>1;return console.log(c,t/60/60),i.jsxs(i.Fragment,{children:[h&&p.createElement(N,{...E,key:`d${t}`,colors:"#7E2E84",duration:o,initialRemainingTime:n},({elapsedTime:a,color:d})=>i.jsx("span",{style:{color:d},children:M("days",K(o-a))})),c&&p.createElement(N,{...E,key:`h${t}`,colors:"#D14081",duration:k,initialRemainingTime:n%k,onComplete:a=>({shouldRepeat:n-a>$})},({elapsedTime:a,color:d})=>i.jsx("span",{style:{color:d},children:M("hours",xe(k-a))})),p.createElement(N,{...E,key:`m${t}`,colors:"#EF798A",duration:$,initialRemainingTime:n%$,onComplete:a=>({shouldRepeat:n-a>D})},({elapsedTime:a,color:d})=>i.jsx("span",{style:{color:d},children:M("minutes",we($-a))})),p.createElement(N,{...E,key:`s${t}`,colors:"#218380",updateInterval:2,onUpdate:a=>{let d=document.title.split("Timer ");d=t-(60-a);const m=Math.floor(+d/60);if(m>0){const u=`${m}:${+d%60}`;document.title=`(${u}) Timer ${d}`}},duration:D,initialRemainingTime:n%D,onComplete:a=>{const d=n-a>0;if(!d){try{new Notification("Hi there!")}catch{navigator.serviceWorker.ready.then(function(u){u.showNotification("Hi there!",{body:"TIMER EXPIRED!"})})}Te()}return{shouldRepeat:d}}},({elapsedTime:a,color:d})=>i.jsx("span",{style:{color:d},children:M("seconds",Se(a))}))]})};Array.from({length:59}).map((t,s)=>{se.push({id:`${s+1}`,value:`${s+1}`})});Array.from({length:23}).map((t,s)=>{s+1>=ve&&ne.push({id:`${s+1}`,value:`${s+1}`,childs:[...se]})});let L=0,Q=location.href.split("timer=");Q[1]&&(L=+Q[1],document.title=`Timer ${L}`);const je=[...ne],U=new Audio(ge);function Te(){U.play().then(()=>{})}function Ce(){U.pause(),U.currentTime=0}const ke=()=>{const[t,s]=p.useState(L);p.useState(je);const e=l=>{const o=l.target.dataset.time;o&&(window.history.pushState("time","","/time?timer="+o),document.title=`Timer ${o}`,s(+o))},n=()=>{s(0),Ce(),window.history.pushState("home","","/")};return i.jsxs("div",{className:"App1",children:[i.jsxs("div",{className:"grid times",children:[i.jsx("div",{onClick:e,"data-time":"3",children:"3 sec"}),i.jsx("div",{onClick:e,"data-time":"600",children:"10 min"}),i.jsx("div",{onClick:e,"data-time":"1200",children:"20 min"}),i.jsx("div",{onClick:e,"data-time":"1800",children:"30 min"}),i.jsx("div",{onClick:e,"data-time":"3600",children:"1 hour"}),i.jsx("div",{onClick:e,"data-time":"4800",children:"1 hour 20 min"})]}),i.jsx("br",{}),!!t&&i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsx("div",{className:"App",children:i.jsx(ye,{t})}),i.jsx("br",{}),i.jsx("button",{className:"stop-timer btn",onClick:n,children:"Stop timer!"})]})]})};class be extends p.Component{constructor(e){super(e);g(this,"handleUpload",(e,n=!1)=>{let{filenames:l}=this.state;if(l.length===1&&e[0].filename===l[0]){this.setState({error:"SAME"});return}e.length===1&&l.length===1&&P()[0]&&(e=e.concat([...P()]));const o=pe(e,n);n&&(o.modal=""),o.modal="",o.showPopupFiles=!1,this.setState(()=>({...o}))});g(this,"clear",()=>{const e=P();F(e,!0),x.rm(W),this.setState({filenames:[],items:[],showPopupFiles:!1,showStr:"",error:""})});g(this,"show",({target:e},n=!1)=>{if(e.tagName==="BUTTON")return;const l=e.dataset.ind,{items:o,isShown:r,ind:h}=this.state;let c=r;const[,a]=o;if(a[l]){c=l!==h||!c;let d="";c&&(d=a[l]),this.setState({showStr:d,ind:l,isShown:c},()=>{n&&this.tryToSpeak(d)()})}});g(this,"handleScroll",()=>{x.set(G,window.scrollY)});g(this,"getStr",e=>{const n=e.split(/>\s[0-9]+:[0-9]+:[0-9]+[.,][0-9]+/);return n[1]&&(e=n[1]),e});g(this,"renderRow",(e,n)=>(e=this.getStr(e),e?i.jsx("div",{onMouseDown:this.show,"data-ind":n,children:i.jsxs("div",{"data-ind":n,children:[e,i.jsx("span",{className:"tooltiptext",children:e?i.jsx("button",{"data-ind":this.state.showStr&&n,onClick:this.tryToSpeak(e),className:"icon speech-voice"}):null})]})},`${e}${n}`):null));g(this,"togglePopup",(e,n=!0)=>{e.preventDefault(),this.setState({showPopupFiles:n,modal:""})});g(this,"toggleDemo",e=>{if(this.state.modal===J)return this.togglePopup(e,!1);this.toggleModal(e,J)});g(this,"toggleModal",(e,n=q)=>{e.preventDefault(),this.setState({modal:n})});g(this,"closeModal",()=>{this.setState({modal:""})});g(this,"tryToSpeak",e=>n=>{const{voice:l,showStr:o,ind:r}=this.state;let h=!1;if(n&&n.target.dataset.ind&&r!==n.target.dataset.ind)return this.show({target:{tagName:"DIV",dataset:n.target.dataset}},!0);o&&(e=this.getStr(o),h=!0);const c=P(),a=me(c[h?1:0]);if(l||a)return ue(e);this.voiceSetting(n)});g(this,"voiceSetting",e=>{e&&e.preventDefault(),this.setState({modal:z})});g(this,"voiceSettingSave",(e,n=!1)=>{const{voice:l,rate:o,pitch:r,volume:h}=e;if(!n){if(this.state.voice===l||!l&&this.state.voice)return this.closeModal()}const c=A();x.setJ(Z,{...c,voice:l,rate:o,pitch:r,volume:h}),this.setState({modal:"",voice:l,rate:o,pitch:r,volume:h})});const{items:n=[],filenames:l=[]}=ee(P()),{voice:o,rate:r=1,volume:h=1,pitch:c=1}=A();this.state={showStr:"",ind:"",isShown:-1,error:"",filenames:l,items:n,showPopupFiles:!1,modal:"",voice:o,rate:r,volume:h,pitch:c}}componentDidMount(){const e=x.get(G,!1);te(),e&&window.scrollTo(0,e),window.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll)}render(){const{items:e,showStr:n,error:l,filenames:o,showPopupFiles:r,modal:h}=this.state,c=`folder${e.length?"-fill":""}`;return i.jsxs("div",{children:[h===q?i.jsx("div",{className:"modal-window",children:i.jsxs("div",{children:[i.jsx("a",{href:"",title:"Close",className:"modal-close",onClick:a=>this.togglePopup(a,!1),children:"Close"}),i.jsx("div",{children:i.jsx("a",{href:"",title:"Close",className:"modal-close bottom",onClick:a=>this.togglePopup(a,!1),children:"Close"})})]})}):null,n?i.jsx("div",{className:"tooltip1",children:i.jsx("span",{className:"tooltiptext",children:this.getStr(n)})}):null,i.jsx("div",{children:i.jsxs("div",{className:"buttons",children:[e.length===2?i.jsx("button",{className:`icon ${c}-icon`,onClick:this.togglePopup}):null,i.jsx("button",{className:"icon speech-voice-setting",onClick:this.voiceSetting})]})}),h===z?i.jsx(fe,{data:this.state,togglePopup:this.togglePopup,voiceSettingSave:this.voiceSettingSave}):null,i.jsx(ke,{})]})}}export{be as default};

var j=Object.defineProperty;var N=(i,t,e)=>t in i?j(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var v=(i,t,e)=>(N(i,typeof t!="symbol"?t+"":t,e),e);import{r as T,j as o,S}from"./index-CID6A6xP.js";const b="app_scroll",O="POPUP_DISCUSS",P="POPUP_SETTINGS",w="Timer";/*! grudus-timepicker | (c) 2017-2017
 grudus | Apache-2.0 license (see LICENSE) */var A=/^([0-1]?[0-9]|2[0-3])$/,R=/^([0-5]?[0-9])$/,D=/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/;function H(i){if(i){if(i instanceof Date)return x(i);if(A.test(i.hours)&&R.test(i.minutes))return{hours:parseInt(i.hours),minutes:parseInt(i.minutes)};if(D.test(i))return L(i);throw new TypeError("INVALID FORMAT: {"+JSON.stringify(i)+"}.\n            Time must be a Date or 'hh:MM' string or object with 'hours' and 'minutes' fields")}else return x(new Date)}function L(i){var t=D.exec(i);return{hours:parseInt(t[1]),minutes:parseInt(t[2])}}function x(i){return{hours:i.getHours(),minutes:i.getMinutes()}}var B=function(i){var t=H(i);return(t.hours<10?"0"+t.hours:t.hours)+":"+(t.minutes<10?"0"+t.minutes:t.minutes)},U="<section class='g-time-wrapper'>\n    <header class='g-head g-flex' id='g-head'>\n        <section class='g-head-content'>\n            <span class='g-current g-hour g-active g-pointer' id='g-hours'>21</span>\n            <span class='g-current'>:</span>\n            <span class='g-current g-minute g-pointer' id='g-minutes'>37</span>\n        </section>\n    </header>\n\n\n    <section class='g-clock-wrapper g-flex' id='g-clock-wrapper'>\n        <div class='g-clock' id='g-clock'>            <span class='g-middle-dot' id='g-middle-dot'></span>\n            <div class='g-hand-of-a-clock' id='g-hand-of-a-clock'></div>\n            <div class='g-clock g-clock-inner' id='g-clock-inner'></div>\n        </div>\n    </section>\n\n\n    <footer class='g-buttons g-flex' id='g-buttons'>\n        <button id='g-time-cancel' class='g-button g-cancel g-pointer'>CANCEL</button>\n        <button id='g-time-submit' class='g-button g-submit g-pointer'>OK</button>\n    </footer>\n\n</section>",z="grudus-clock",_={onSubmit:function(){},onCancel:function(){},headerBackground:"#1976D2",headerColor:"#c7d6e1",headerSelected:"#ffffff",wrapperBackground:"#f0fff0",footerBackground:"#f0fff0",submitColor:"#1976D2",cancelColor:"#1976D2",clockBackground:"#CFD8DC",clockItemColor:"#212121",clockItemInnerColor:"#212121",handColor:"#1976D2"},V={HOURS:"hours",MINUTES:"minutes"},d={clock:"g-clock",clockItem:"g-clock-item",inner:"g-clock-inner",outer:"g-clock-outer",item:"g-clock-item",hand:"g-hand-of-a-clock",fadeOut:"g-fade-out",selected:"g-selected",active:"g-active",submit:"g-submit",cancel:"g-cancel",hour:"g-hour",minute:"g-minute"},u={headerId:"g-head",hoursId:"g-hours",minutesId:"g-minutes",clockId:"g-clock",innerId:"g-clock-inner",wrapperId:"g-clock-wrapper",dotId:"g-middle-dot",handId:"g-hand-of-a-clock",buttonsId:"g-buttons",submitId:"g-time-submit",cancelId:"g-time-cancel"},f={clockId:z,clockConfig:_,FaceType:V},g=function(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function i(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),$=function(){function i(t){g(this,i),this.options=t.options,this.time=t.time,this.onHourClicked=t.onHourClicked,this.onMinutesClicked=t.onMinutesClicked,this.initView()}return p(i,[{key:"initView",value:function(){var e=this;this.headerHours=document.getElementById(u.hoursId),this.headerHours.onclick=function(){e.toggleActiveToHours(),e.onHourClicked()},this.headerMinutes=document.getElementById(u.minutesId),this.headerMinutes.onclick=function(){e.toggleActiveToMinutes(),e.onMinutesClicked()},this.updateDisplayedTime(),this.toggleActiveToHours()}},{key:"toggleActiveToMinutes",value:function(){this.toggleActive(this.headerHours,this.headerMinutes)}},{key:"toggleActiveToHours",value:function(){this.toggleActive(this.headerMinutes,this.headerHours)}},{key:"toggleActive",value:function(e,n){e.style.color=this.options.headerColor,n.style.color=this.options.headerSelected}},{key:"updateDisplayedTime",value:function(){i.doUpdateDisplayedTime(this.headerHours,this.time.hours),i.doUpdateDisplayedTime(this.headerMinutes,this.time.minutes)}}],[{key:"doUpdateDisplayedTime",value:function(e,n){n<10?e.innerText="0"+n:e.innerText=n}}]),i}(),W=function(){function i(t,e,n){g(this,i),this.displayed=["00","05","10","15","20","25","30","35","40","45","50","55"],this.options=t.options,this.type=f.FaceType.MINUTES,this.selected=void 0,this.items=t,this.minutes=e,this.updateMinutes=n}return p(i,[{key:"onEnter",value:function(){this.selected=this.findSelected(this.minutes),this.colorSelected(),this.updateMinutes(this.minutes,this.minutes*6)}},{key:"onLeave",value:function(){this.selected&&(this.removeSelected(),this.selected=void 0)}},{key:"selectTime",value:function(e){this.selected&&this.removeSelected();var n=Math.round(e/6)%60;this.selected=this.findSelected(n),this.colorSelected(),this.minutes=n,this.updateMinutes(this.minutes,e)}},{key:"findSelected",value:function(e){return e%5===0?this.items.clockItems[e/5]:this.items.outerClockItems[e]}},{key:"colorSelected",value:function(){if(this.isOuter()){this.selected.classList.add(d.selected);return}this.selected.style.background=this.options.handColor,this.selected.style.color="whitesmoke"}},{key:"removeSelected",value:function(){if(this.isOuter()){this.selected.classList.remove(d.selected);return}this.selected.style.background="transparent",this.selected.style.color=this.options.clockItemColor}},{key:"isOuter",value:function(){return this.items.outerClockItems.indexOf(this.selected)>-1}}]),i}(),Y=function(){function i(t,e,n){g(this,i),this.displayed=["12","1","2","3","4","5","6","7","8","9","10","11"],this.displayedInner=["00","13","14","15","16","17","18","19","20","21","22","23"],this.type=f.FaceType.MINUTES,this.selected=void 0,this.options=t.options,this.items=t,this.hours=e,this.updateHours=n}return p(i,[{key:"onEnter",value:function(){this.items.innerClockElem.style.display="block";var e=this.hours<13&&this.hours!==0,n=this.hours%12;this.selected=e?this.items.clockItems[n]:this.items.innerClockItems[n],this.colorSelected(),this.updateHours(this.hours,n*30,e?this.items.radius:this.items.radius-50)}},{key:"onLeave",value:function(){this.items.innerClockElem.style.display="none",this.selected&&(this.removeSelected(),this.selected=void 0)}},{key:"selectTime",value:function(e,n){this.selected&&this.removeSelected();var s=Math.round(e/30)%12;this.selected=(n===this.items.innerClockElem?this.items.innerClockItems:this.items.clockItems)[s],this.colorSelected(),this.hours=parseInt(this.selected.innerText);var c=Math.round(e/30)*30;this.updateHours(this.hours,c,n===this.items.innerClockElem?this.items.radius-50:this.items.radius)}},{key:"colorSelected",value:function(){this.selected.style.background=this.options.handColor,this.selected.style.color="#ffffff"}},{key:"removeSelected",value:function(){this.selected.style.background="transparent",this.selected.style.color=this.isInner()?this.options.clockItemInnerColor:this.options.clockItemColor}},{key:"isInner",value:function(){return Array.from(this.items.innerClockItems).indexOf(this.selected)>-1}}]),i}();function G(i){return i*(Math.PI/180)}function X(i){return i*(180/Math.PI)}function J(i,t){var e=t.getBoundingClientRect();return{x:i.clientX-e.left,y:i.clientY-e.top}}function K(i){return new Promise(function(t){setTimeout(t,i)})}Promise.delay=function(i,t){return t||(t=i,i=function(){}),K(t).then(i)};Promise.prototype.delay=function(i,t){return this.then(function(){return Promise.delay(i,t)})};var E={toRadians:G,toDegrees:X,findMousePosition:J},Q=function(){function i(t,e){g(this,i),this.clockElem=t,this.innerClockElem=e,this.size={},this.middle={}}return p(i,[{key:"create",value:function(e,n,s,c){i.doCreate(e,this.clockElem,function(a){return a.classList.add(d.item)}),i.doCreate(n,this.innerClockElem,function(a,h){a.classList.add(d.item,d.inner),a.innerText=c.displayedInner[h]});for(var r=0;r<60;r++){var l=document.createElement("span");l.classList.add(d.outer),s.push(l),this.clockElem.appendChild(l)}}},{key:"calculateSize",value:function(e,n,s){this.size.width=this.clockElem.offsetWidth,this.size.height=this.clockElem.offsetHeight,this.middle.x=this.size.width/2,this.middle.y=this.size.height/2,this.itemsRadius=this.size.width/2-20;var c=this.innerClockElem.offsetWidth,r=this.innerClockElem.offsetHeight,l=c/2,a=r/2;i.doCalculateSize(this.middle.x,this.middle.y,this.itemsRadius,e),i.doCalculateSize(l,a,this.itemsRadius-40,n),i.doCalculateSize(this.middle.x,this.middle.y,this.itemsRadius,s)}}],[{key:"doCreate",value:function(e,n,s){for(var c=0;c<12;c++){var r=document.createElement("span");s(r,c),e.push(r),n.appendChild(r)}}},{key:"doCalculateSize",value:function(e,n,s,c){for(var r=360/c.length,l=0;l<c.length;l++){var a=E.toRadians(l*r),h=c[l],m=h.offsetWidth,k=h.offsetHeight;h.style.left=e+Math.sin(a)*s-m/2+"px",h.style.bottom=n+Math.cos(a)*s-k/2+"px"}}}]),i}(),q=function(){function i(t,e,n){g(this,i),this.options=t,this.time=e,this.onTimeUpdate=n,this.isMouseDown=!1,this.clockItems=[],this.innerClockItems=[],this.outerClockItems=[],this.size={},this.middle={},this.initViews(),this.initTimeFaces(e),this.createFace(),this.hoursFace.items.radius=this.itemsRadius,this.currentFace=this.hoursFace,this.changeDisplayed(this.currentFace.displayed)}return p(i,[{key:"initViews",value:function(){var e=this;this.clockElem=document.getElementById(u.clockId),this.innerClockElem=document.getElementById(u.innerId),this.handOfAClock=document.getElementById(u.handId),this.clockElem.onmousedown=function(){return e.isMouseDown=!0},this.clockElem.onmouseup=function(){e.isMouseDown=!1,e.toggleToMinutes()},this.handOfAClock.onmouseup=function(n){return n.stopPropagation()},this.handOfAClock.onmousemove=function(n){return n.stopPropagation()},this.handOfAClock.onclick=function(n){return n.stopPropagation()},this.clockElem.onmousemove=function(n){return e.selectTime(n,!1,e.clockElem)},this.clockElem.onclick=function(n){return e.selectTime(n,!0,e.clockElem)},this.innerClockElem.onmousemove=function(n){return e.selectTime(n,!1,e.innerClockElem)},this.innerClockElem.onclick=function(n){return e.selectTime(n,!0,e.innerClockElem)}}},{key:"initTimeFaces",value:function(e){var n=this;this.minutesFace=new W({options:this.options,clockItems:this.clockItems,outerClockItems:this.outerClockItems},e.minutes,function(s,c){return n.updateMinutes(s,c)}),this.hoursFace=new Y({options:this.options,innerClockItems:this.innerClockItems,clockItems:this.clockItems,innerClockElem:this.innerClockElem},e.hours,function(s,c,r){return n.updateHours(s,c,r)})}},{key:"onStart",value:function(){this.currentFace.onEnter()}},{key:"createFace",value:function(){var e=new Q(this.clockElem,this.innerClockElem);e.create(this.clockItems,this.innerClockItems,this.outerClockItems,this.hoursFace),e.calculateSize(this.clockItems,this.innerClockItems,this.outerClockItems),this.size=e.size,this.middle=e.middle,this.itemsRadius=e.itemsRadius}},{key:"selectTime",value:function(e,n,s){if(n||this.isMouseDown){var c=E.findMousePosition(e,this.clockElem),r=c.x-this.middle.x,l=this.middle.y-c.y,a=90-E.toDegrees(Math.atan(l/r));r<0&&(a+=180),this.currentFace.selectTime(a,s),e.stopPropagation()}}},{key:"changeDisplayed",value:function(e){for(var n=0;n<this.clockItems.length;n++)this.clockItems[n].innerText=e[n]}},{key:"onEachClockElement",value:function(e){[].forEach.call(this.clockItems,function(n){return e(n)})}},{key:"updateMinutes",value:function(e,n){this.time.minutes=e,this.calculateHandOfTheClock(n,this.itemsRadius),this.onTimeUpdate(this.time,f.FaceType.MINUTES)}},{key:"updateHours",value:function(e,n,s){this.time.hours=e,this.calculateHandOfTheClock(n,s),this.onTimeUpdate(this.time,f.FaceType.HOURS)}},{key:"calculateHandOfTheClock",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.itemsRadius;this.handOfAClock.style.transform="rotate("+(e-90)+"deg)",this.handOfAClock.style.width=n+"px"}},{key:"toggleToHours",value:function(){this.minutesFace.onLeave(),this.toggleTime(this.hoursFace)}},{key:"toggleToMinutes",value:function(){this.hoursFace.onLeave(),this.toggleTime(this.minutesFace)}},{key:"toggleTime",value:function(e){var n=this;this.currentFace!==e&&(this.onEachClockElement(function(s){return s.classList.add(d.fadeOut)}),this.handOfAClock.classList.add(d.fadeOut),Promise.delay(function(){n.onEachClockElement(function(s){return s.classList.remove(d.fadeOut)}),n.handOfAClock.classList.remove(d.fadeOut),n.changeDisplayed(e.displayed),n.currentFace=e,n.onEachClockElement(function(s){return n.removeSelected(s)}),e.onEnter()},300))}},{key:"removeSelected",value:function(e){e.classList.remove(d.selected),e.style.background="transparent",e.style.color=this.options.clockItemColor}}]),i}(),Z=function(){function i(t,e){g(this,i),this.options=t,this.initView(),this.time=e,this.initElements()}return p(i,[{key:"initView",value:function(){var e=this;this.submitButton=document.getElementById(u.submitId),this.submitButton.onclick=function(){var n=e.time;n.formatted=function(){return B(n)},e.options.onSubmit(n),i.dispose()},this.cancelButton=document.getElementById(u.cancelId),this.cancelButton.onclick=function(){e.options.onCancel(),i.dispose()}}},{key:"initElements",value:function(){var e=this;this.header=new $({options:this.options,time:this.time,onHourClicked:function(){return e.toggleToHours()},onMinutesClicked:function(){return e.toggleToMinutes()}}),this.clockFace=new q(this.options,this.time,function(n,s){return e.onTimeUpdate(n,s)})}},{key:"onStart",value:function(){this.clockFace.onStart()}},{key:"toggleToHours",value:function(){this.clockFace.toggleToHours()}},{key:"toggleToMinutes",value:function(){this.clockFace.toggleToMinutes()}},{key:"onTimeUpdate",value:function(e,n){this.time=e,this.header.time=e,this.header.updateDisplayedTime(),n===f.FaceType.MINUTES&&this.header.toggleActiveToMinutes()}}],[{key:"dispose",value:function(){document.body.removeChild(document.getElementById(f.clockId))}}]),i}();function ee(i){document.getElementById(u.headerId).style.background=i.headerBackground,document.getElementById(u.headerId).style.color=i.headerColor,document.getElementById(u.wrapperId).style.background=i.wrapperBackground,document.getElementById(u.clockId).style.background=i.clockBackground,document.getElementById(u.handId).style.background=i.handColor,document.getElementById(u.dotId).style.background=i.handColor,document.getElementById(u.buttonsId).style.background=i.footerBackground,document.getElementById(u.submitId).style.color=i.submitColor,document.getElementById(u.cancelId).style.color=i.cancelColor,C(d.clockItem,i.clockItemColor),C(d.inner,i.clockItemInnerColor),C(d.outer,i.handColor,"borderColor")}function C(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"color",n=Array.from(document.getElementsByClassName(i)),s=!0,c=!1,r=void 0;try{for(var l=n[Symbol.iterator](),a;!(s=(a=l.next()).done);s=!0){var h=a.value;h.style[e]=t}}catch(m){c=!0,r=m}finally{try{!s&&l.return&&l.return()}finally{if(c)throw r}}}function te(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ie();var t=Object.assign({},f.clockConfig,i),e=H(t.time),n=new Z(t,e);ee(t),n.onStart()}function ie(){if(document.getElementById(f.clockId))throw Error("There is already one running grudus-timepicker instance!");var i=document.createElement("div");i.id=f.clockId,i.innerHTML=U,document.body.appendChild(i)}var ne={showPicker:function(t){return te(t)},format:function(t){return B(t)}};const se=()=>Math.random();let y=0;const M=location.href.split("timer=");M[1]&&(y=+M[1],document.title="".concat(w).concat(y),window.safTimerBtn(+y));const oe={headerBackground:"#424242",headerColor:"#e0e0e0",headerSelected:"#fafafa",wrapperBackground:"#424242",footerBackground:"#424242",submitColor:"#F44336",cancelColor:"#F44336",clockBackground:"#424242",clockItemColor:"#fafafa",clockItemInnerColor:"#e0e0e0",handColor:"#F44336"},ce=()=>{const[i,t]=T.useState(y);T.useEffect(()=>{window.resetReactApp||(window.resetReactApp=()=>{t(0)})},[]);const e=c=>{t(0),document.title=w,window.history.replaceState(null,document.title,"/"),c instanceof Function&&c()},n=c=>{if(c.stopPropagation(),c.preventDefault(),!(c.target instanceof HTMLElement))return;const r=c.target.dataset.time;if(r)e(()=>{window.history.replaceState(null,"","#timer="+r),t(+r+se()),window.safTimerBtn(+r)});else{const l=c.target.dataset.current;ne.showPicker({time:l?new Date:{hours:0,minutes:5},...oe,onSubmit:({hours:a,minutes:h})=>{let m=0;if(!l)a&&(m=a*60*60),h&&(m+=h*60);else{const k=new Date;k.setHours(a),k.setMinutes(h),k.setSeconds(0),m=(k.getTime()-new Date().getTime())/1e3}m&&e(()=>{t(m),window.safTimerBtn(+m)})}})}return!1},s=c=>{window.safTimerResetBtn(),e()};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid times",children:[o.jsx("a",{className:"btn",href:"/#timer=3",onClick:n,"data-time":"3",children:"3 sec"}),o.jsx("a",{className:"btn",href:"/#timer=30",onClick:n,"data-time":"30",children:"30 sec"}),o.jsx("a",{className:"btn",href:"/#timer=60",onClick:n,"data-time":"60",children:"1 min"}),o.jsx("a",{className:"btn",href:"/#timer=120",onClick:n,"data-time":"120",children:"2 min"}),o.jsx("a",{className:"btn",href:"/#timer=300",onClick:n,"data-time":"300",children:"5 min"}),o.jsx("a",{className:"btn",href:"/#timer=600",onClick:n,"data-time":"600",children:"10 min"}),o.jsx("a",{className:"btn",href:"/#timer=1200",onClick:n,"data-time":"1200",children:"20 min"}),o.jsx("a",{className:"btn",href:"/#timer=1800",onClick:n,"data-time":"1800",children:"30 min"}),o.jsx("a",{className:"btn",href:"/#timer=3600",onClick:n,"data-time":"3600",children:"1 hour"}),o.jsx("a",{className:"btn",href:"/#timer=4800",onClick:n,"data-time":"4800",children:"1 h 20 min"}),o.jsx("a",{className:"btn",href:"/#timer=5400",onClick:n,"data-time":"5400",children:"1 h 30 min"}),o.jsx("a",{className:"btn",href:"/",onClick:n,"data-time":"",children:"+"})]}),o.jsx("br",{}),o.jsx("div",{className:"ms-default-trigger btn",onClick:n,"data-current":"1",children:"Select countdown time"}),o.jsx("br",{}),!!i&&o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsx("div",{className:"timer",children:o.jsxs("div",{className:"timer-display",children:[o.jsx("span",{className:"hours",id:"hhour",style:{display:"none"}}),o.jsx("span",{className:"colon",id:"hhourSep",style:{display:"none"},children:":"}),o.jsx("span",{className:"minutes",id:"mmin"}),o.jsx("span",{className:"colon",children:":"}),o.jsx("span",{className:"seconds",id:"ssec"})]})}),o.jsx("br",{}),o.jsx("button",{className:"stop-timer btn",onClick:s,children:"Stop timer!"})]})]})};let I=0;const F=location.href.split("timer=");F[1]&&(I=+F[1],document.title="".concat(w).concat(I),window.safTimerBtn(+I));class ue extends T.Component{constructor(e){super(e);v(this,"handleScroll",()=>{S.set(b,window.scrollY)});v(this,"togglePopup",e=>{e.preventDefault(),this.setState({modal:""})});v(this,"closeModal",()=>{this.setState({modal:""})});v(this,"voiceSetting",e=>{e&&e.preventDefault(),this.setState({modal:P})});this.state={modal:""}}componentDidMount(){const e=S.get(b,"0");e&&window.scrollTo(0,+e),window.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll)}render(){const{modal:e}=this.state;return o.jsxs(o.Fragment,{children:[e===O?o.jsx("div",{className:"modal-window",children:o.jsxs("div",{children:[o.jsx("a",{href:"",title:"Close",className:"modal-close",onClick:this.togglePopup,children:"Close"}),o.jsx("div",{children:o.jsx("a",{href:"",title:"Close",className:"modal-close bottom",onClick:this.togglePopup,children:"Close"})})]})}):null,o.jsx(ce,{})]})}}export{ue as default};
//# sourceMappingURL=index-DozEU7Q9.js.map
